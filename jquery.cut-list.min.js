!function(t,i,s){t.fn.cutList=function(){var s=function t(i,s){var e,n={};for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e]);for(e in s)Object.prototype.hasOwnProperty.call(s,e)&&(n[e]=s[e]);return n}({moreBtnTitle:"Еще",showMoreOnHover:!1,alwaysVisibleElem:void 0,onOpen:function(){},onClose:function(){},risezeDelay:50},arguments[0]);return this.each(function(){var e,n,o,l,d,r,c=t(this),a=t(this).clone();function u(){clearTimeout(r),r=setTimeout(function(){var i;i=c,n=e,t.when(function i(s){s.find(".cut-list__more .cut-list__elem").each(function(){var i=t(this).data("index");0==i?t(this).prependTo(s):t(this).insertAfter(s.find('.cut-list__elem[data-index="'+(i-1)+'"]'))})}(i)).done(function(){p(i)})},s.risezeDelay)}function f(n){n.find(".cut-list__dropdown").length||n.append('<div style="display:none" class="cut-list__elem cut-list__dropdown"></div>').find(".cut-list__dropdown").append('<div class="cut-list__drop"></div>').find(".cut-list__drop").append('<div class="cut-list__drop-toggle">'+s.moreBtnTitle+"</div>").append('<div class="cut-list__more"><div class="cut-list__more-content"></div></div>'),n.addClass("cut-list").children().each(function(i){t(this).attr("data-index",i).addClass("cut-list__elem")}),index=(e=n.find(".cut-list__elem").length)-1,n.find(s.alwaysVisibleElem).length>1&&console.log("Внимание! Вами назначено несколько alwaysVisibleElem, будет использоваться только первый."),d=n.find(s.alwaysVisibleElem+":first").index(),p(n),s.showMoreOnHover?n.find(".cut-list__drop").hover(function(){t(this).parents(".cut-list__dropdown").addClass("is-show"),h(t(this).parents(".cut-list__dropdown").find(".cut-list__more")),s.onOpen(n)},function(){t(this).parents(".cut-list__dropdown").removeClass("is-show").find(".cut-list__more").hide().removeClass("is-top is-left"),s.onClose(n)}):(n.find(".cut-list__drop-toggle").on("click",function(){t(this).parents(".cut-list__dropdown").is(".is-show")?t(this).parents(".cut-list__dropdown").removeClass("is-show").find(".cut-list__more").hide().removeClass("is-top is-left"):(t(this).parents(".cut-list__dropdown").addClass("is-show"),h(t(this).parents(".cut-list__dropdown").find(".cut-list__more"))),s.onOpen(n)}),t(document).on("click",function(i){t(i.target).closest(".cut-list__dropdown").length||(t(".cut-list__dropdown.is-show").removeClass("is-show").find(".cut-list__more").hide().removeClass("is-top is-left"),s.onClose(n))})),t(i).on("resize",u)}function p(i){o=i.innerWidth(),l=i.find(".cut-list__dropdown").outerWidth(!0);var r='.cut-list__elem:not(".cut-list__dropdown")';-1!=d&&(l+=i.find(s.alwaysVisibleElem+":first").outerWidth(!0),r='.cut-list__elem:not(".cut-list__dropdown,'+s.alwaysVisibleElem+':first")'),i.find(r).each(function(r){if((l+=t(this).outerWidth(!0))>=o)return function t(i,n){var r='.cut-list__elem:not(".cut-list__dropdown")';for(-1!=d&&(r='.cut-list__elem:not(".cut-list__dropdown,'+s.alwaysVisibleElem+':first")'),x=n;x<=e;x++)i.find(r+'[data-index="'+x+'"]').appendTo(i.find(".cut-list__more-content"));-1!=d&&i.find(".cut-list__elem:first").is(s.alwaysVisibleElem)&&(o=i.innerWidth(),(l=i.find(".cut-list__dropdown").outerWidth(!0)+i.find(s.alwaysVisibleElem+":first").outerWidth(!0))>=o&&i.find('.cut-list__elem:not(".cut-list__dropdown")[data-index="'+i.find(s.alwaysVisibleElem+":first").data("index")+'"]').appendTo(i.find(".cut-list__more-content")))}(i,n=-1!=d&&r>d?r+1:r),i.addClass("with-more-items").find(".cut-list__dropdown").show(),!1;i.removeClass("with-more-items").find(".cut-list__dropdown").hide()})}function h(i){var s=t(document).outerHeight(!0);i.css("visibility","hidden").show(),i.offset().top+i.innerHeight()>s&&i.addClass("is-top"),i.offset().left<0&&i.addClass("is-left"),i.css("visibility","visible")}f(c),t.fn.cutList.setup=function(){f(c)},t.fn.cutList.destroy=function(){c.html(a.html()),t(i).off("resize",u)}})}}(jQuery,window);